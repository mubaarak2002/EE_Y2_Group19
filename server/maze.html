<html>
<canvas id="canvas" height="600" width="600"></canvas>
<div id="container"></div>
<body>
<script src="/socket.io/socket.io.js"></script>
<script>

function drawLine(ctx, begin, end, stroke = 'black', width = 1) {
    if (stroke) {
        ctx.strokeStyle = stroke;
    }

    if (width) {
        ctx.lineWidth = width;
    }

    ctx.beginPath();
    ctx.moveTo(...begin);
    ctx.lineTo(...end);
    ctx.stroke();
}

// open socket
const socket = io("/webpage");

// listen for "connection" event from webpage
socket.on("connection", (data) => {
  console.log(data);
});

//listens for node data from the server
socket.on('distance', function(data){
  distance = data.dist
  previous = data.prev
  console.log(distance);
  console.log(previous);
  const canvas = document.querySelector('#canvas');
  if (canvas.getContext) {
    const ctx = canvas.getContext('2d');
    //need to calculate end position here and send to function
    //also need to remember the end position of previous line and use that for the start of the next line
    drawLine(ctx, [100, distance*25], [200, 600], 'green', 5);
  }
});

</script>
</body>
</html>
